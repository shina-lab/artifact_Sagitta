--- a/ext/intl/breakiterator/codepointiterator_internal.cpp
+++ b/ext/intl/breakiterator/codepointiterator_internal.cpp
@@ -73,7 +73,7 @@ CodePointBreakIterator::~CodePointBreakIterator()
 	clearCurrentCharIter();
 }
 
-UBool CodePointBreakIterator::operator==(const BreakIterator& that) const
+bool CodePointBreakIterator::operator==(const BreakIterator& that) const
 {
 	if (typeid(*this) != typeid(that)) {
 		return false;

--- a/ext/intl/breakiterator/codepointiterator_internal.h
+++ b/ext/intl/breakiterator/codepointiterator_internal.h
@@ -37,7 +37,7 @@ namespace PHP {
 
 		virtual ~CodePointBreakIterator();
 
-		virtual UBool operator==(const BreakIterator& that) const;
+		virtual bool operator==(const BreakIterator& that) const;
 
 		virtual CodePointBreakIterator* clone(void) const;
 
--- a/main/streams/cast.c
+++ b/main/streams/cast.c
@@ -23,6 +23,10 @@
 #include <stddef.h>
 #include <fcntl.h>
 
+#define _FILE_OFFSET_BITS 64
+#include <sys/types.h>
+#include <stdio.h>
+
 #include "php_streams_int.h"
 
 /* Under BSD, emulate fopencookie using funopen */

--- a/main/streams/cast.c
+++ b/main/streams/cast.c
@@ -25,6 +25,9 @@
 
 #include "php_streams_int.h"
 
+#define off64_t off_t
+#include <bits/types/cookie_io_functions_t.h>
+
 /* Under BSD, emulate fopencookie using funopen */
 #if defined(HAVE_FUNOPEN) && !defined(HAVE_FOPENCOOKIE)
 